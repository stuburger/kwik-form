(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{142:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(147),u=a.n(o),l=a(197),i=a(231),c=a(150),s=a(149),d=a(148),m=a(151),v=a(133),f=a.n(v),p=(a(201),a(203),a(204),a(205),a(207),a(209),a(214),a(216),a(219),a(220),a(14),a(60),a(221),a(222),a(224),a(225),a(230)),b=a(232),h=a(159),y=a.n(h);function j(e){return"function"==typeof e}function O(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}var g=Symbol("uniq");function E(e){var t=Object(r.useContext)(e);if(t===g)throw new Error("A Consumer component can only appear inside a <Form /> (Provider) component that belongs to the same context.");return t}var C=function(e,t){return e?e.concat("."+t):""+t};function _(e,t,a){var r=E(t),n=r.path,o=r.value,u=void 0===o?{}:o,l=r.errors,i=void 0===l?{}:l,c=r.visited,s=void 0===c?{}:c,d=r.touched,m=void 0===d?{}:d,v=r.branchValues,f=void 0===v?{}:v,b=r.initialValue,h=void 0===b?{}:b;return Object(p.a)(Object(p.a)({},r),{path:C(n,e),touched:m[e],visited:s[e],errors:i[e],initialValue:h[e],value:void 0===u[e]?a:u[e],branchValues:Object.keys(f).reduce((function(t,a){return t[a]=function(e){return null!==e&&e instanceof Object}(f[a])?f[a][e]:void 0,t}),{})})}function V(e,t){return function(a){var r=a.children,o=a.commonValues,u=void 0===o?{}:o,l=a.branchValues,i=void 0===l?{}:l,c=e(a);return n.a.createElement(t,{value:Object(p.a)(Object(p.a)({},c),{path:"",branchValues:j(i)?i({formValue:c.formValue}):i,commonValues:j(u)?u({formValue:c.formValue}):u})},"function"==typeof r?r(c):r)}}function F(e){e.path;return null}function k(e,t,a){return function(r){var o,u=r.name,l=r.render,i=r.validate,c=r.component,s=Object(p.b)(r,["name","render","validate","component"]),d=e(u,{validate:i}),m=d[0],v=d[1],f=a(u),b=t(u),h=Object(p.a)(Object(p.a)({},m),{value:(o=s.type,"radio"===o||"checkbox"===o?s.value:m.value)}),y=Object(p.a)(Object(p.a)(Object(p.a)({input:h,meta:v},s),f),b);if(c&&"string"!=typeof c){var j=c;return n.a.createElement(j,Object(p.a)({key:"comp"},y))}return l?l(y):"string"==typeof c?n.a.createElement(c,Object(p.a)(Object(p.a)({},h),s)):n.a.createElement(F,Object(p.a)({key:"comp",path:v.path},y))}}function N(e){return function(t){var a=t.name,o=t.children,u=t.fallback,l=_(a,e,void 0===u?[]:u);Object(r.useEffect)((function(){return l.registerField(l.path),function(){return l.unregisterField(l.path)}}),[l.registerField,l.unregisterField,l.path]);var i=Object(r.useCallback)((function(e){l.setValue(l.path,"function"==typeof e?e(l.value):e,!1)}),[l.value,l.setValue,l.path]),c=Object(r.useCallback)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=Object(p.c)(l.value),r=a.push.apply(a,e);return i(a),r}),[l.value,i]),s=Object(r.useCallback)((function(){var e=Object(p.c)(l.value),t=e.pop();return i(e),t}),[l.value,i]),d=Object(r.useCallback)((function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];var r=Object(p.c)(l.value);return r.splice.apply(r,Object(p.c)([e,0],t)),i(r),r.length}),[l.value,i]),m=Object(r.useCallback)((function(e){var t=Object(p.c)(l.value),a=t.splice(e,1);return i(t),a[0]}),[l.value,i]),v=Object(r.useCallback)((function(){var e=Object(p.c)(l.value),t=e[0];return i(e.splice(1)),t}),[l.value,i]),f=Object(r.useCallback)((function(e,t){var a=Object(p.c)(l.value);a[e]=[a[t],a[t]=a[e]][0],i(a)}),[l.value,i]),b=Object(r.useCallback)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=Object(p.c)(l.value),r=a.unshift.apply(a,e);return i(a),r}),[l.value,i]);return n.a.createElement(e.Provider,{value:l},"function"==typeof o?o(l.value,{pop:s,push:c,swap:f,shift:v,insert:d,remove:m,unshift:b,setValue:i}):o)}}var S=function(e){var t=e.msg,a=e.path,n=e.registerErrors,o=e.unregisterErrors;return Object(r.useEffect)((function(){return n(a,[t]),function(){return o(a,[t])}}),[t,a,n,o]),null};function w(e){return function(t){var a=E(e),r=t.path,o=void 0===r?"":r,u=t.msg,l=t.children,i=void 0===l?null:l;return"string"==typeof u?n.a.createElement(S,Object(p.a)({key:u+o},a,{msg:u,path:o})):i}}function x(e){function t(e,t,a){void 0===a&&(a={});var n=a.validate,o=e,u=t.setValue,l=t.registerField,i=t.unregisterField,c=t.registerErrors,s=t.unregisterErrors,d=t.setActiveField;Object(r.useEffect)((function(){return l(o),function(){return i(o)}}),[o,l,i]);var m,v=(m=n,null==m?[]:Array.isArray(m)?m:[m]).map((function(e){return e(t.value,t.formValue)})).filter(Boolean);Object(r.useEffect)((function(){return c(o,v),function(){return s(o,v)}}),[o,v.join(""),s,c]);var f=Object(r.useCallback)((function(e,a){void 0===a&&(a=!0),u(o,j(e)?e(t.value):e,a)}),[t.value,u,o]),p=t.touchField,b=Object(r.useCallback)((function(e){p(o,e)}),[p,o]),h=t.visitField,y=Object(r.useCallback)((function(e){h(o,e)}),[h,o]),O=Object(r.useCallback)((function(e){var t=e.target,a=t.value,r=t.type,n=t.checked,o=a;if(/number|range/.test(r)){var u=parseFloat(o);o=Number.isNaN(u)?"":u}else(function(e){return"radio"===e||"checkbox"===e})(r)&&(o=n);f(o)}),[f]),g=Object(r.useCallback)((function(){d(o)}),[d,o]),E=Object(r.useCallback)((function(){t.visited?d(null):h(o,!0)}),[d,h,o,t.visited]),C={path:o,setValue:f,submit:t.submit,errors:t.errors||[],visited:!!t.visited,touched:!!t.touched,setTouched:b,setVisited:y,formValue:t.formValue,resetForm:t.resetForm,setFormValue:t.setFormValue,submitCount:t.submitCount,forgetState:t.forgetState,initialValue:t.initialValue,setFormVisited:t.setFormVisited,setFormTouched:t.setFormTouched,isActive:t.activeField===o,isValid:0===(t.errors||[]).length,isDirty:t.formIsDirty&&t.initialValue!==t.value};return[{onBlur:E,onFocus:g,onChange:O,name:e.toString(),value:t.value},C]}return{useField:function(a,r){void 0===r&&(r={});var n=_(a,e);return t(n.path,n,r)},useFieldBase:t}}function A(e,t){return(Array.isArray(t)?t:[t]).reduce((function(e,t){switch(t.type){case"mount":e.initialMount=!0;break;case"set_form_value":var a=t.payload.value;e.formValue=a;break;case"set_active_field":var r=t.payload.path;e.activeField=r;break;case"unset_touched":r=t.payload.path;e.touched=Object(b.a)(e.touched,r);break;case"set_touched":var n=t.payload;r=n.path,a=n.value;e.touched=Object(b.c)(e.touched,r,a);break;case"set_visited":var o=t.payload;r=o.path,a=o.value;e.visited=Object(b.c)(e.visited,r,a);break;case"set_form_touched":a=t.payload.value;e.touched=a;break;case"set_form_visited":a=t.payload.value;e.visited=a;break;case"set_value":var u=t.payload,l=(r=u.path,a=u.value,e.formValue);e.formValue=Object(b.c)(l,r,a);break;case"unset_visited":r=t.payload.path;e.visited=Object(b.a)(e.visited,r);break;case"set_errors":var i=t.payload,c=(r=i.path,i.errors),s=(m=Object(b.b)(e.errors,r,[])).length,d=new Set(m.concat(c));e.errorCount=e.errorCount-s+d.size,e.errors=Object(b.c)(e.errors,r,Array.from(d));break;case"unset_errors":var m,v=t.payload,f=(r=v.path,v.errors),p=(m=Object(b.b)(e.errors,r,[])).filter((function(e){return!f.includes(e)}));e.errorCount-=f.length,e.errors=Object(b.c)(e.errors,r,p);break;case"set_submit_count":a=t.payload.value;e.submitCount=a;break;case"inc_submit_count":var h=e.submitCount;a=t.payload.value;e.submitCount=h+a;break;default:throw new Error("unknown action")}return e}),Object(p.a)({},e))}var D,T=function(){};function P(){return function(e){var t=n.a.useRef([]),a=e,o=a.disabled,u=a.onSubmit,l=void 0===u?T:u,i=a.initialValue,c=void 0===i?{}:i,s=a.initialSubmitCount,d=void 0===s?0:s,m=a.initialTouched,v=void 0===m?{}:m,f=a.initialVisited,h=void 0===f?{}:f,g=a.onStateChange,E=a.persistFieldState,C=a.onFormValueChange,_=a.submitUnregisteredValues,V=void 0!==_&&_,F=a.rememberStateOnReinitialize,k=void 0!==F&&F,N=n.a.useReducer(A,{errors:{},errorCount:0,activeField:null,initialMount:!1,touched:v,visited:h,submitCount:d,formValue:c||{}}),S=N[0],w=N[1],x=S.formValue,D=S.initialMount,P=S.visited,I=S.touched,M=S.errorCount,B=S.errors,R=S.submitCount,U=S.activeField,z=o||!D,J=O(S),Y=O(c);Object(r.useEffect)((function(){w([{type:"mount",payload:void 0}])}),[]),Object(r.useEffect)((function(){J&&g&&g(J,S)}),[g,S,J]);var $=null==J?void 0:J.formValue;Object(r.useEffect)((function(){$&&("function"!=typeof C||y()($,x)||C($,x))}),[C,x,$]),Object(r.useEffect)((function(){y()(Y,c)||(w({type:"set_form_value",payload:{value:c}}),k||w([{type:"set_form_touched",payload:{value:v}},{type:"set_form_visited",payload:{value:h}},{type:"set_submit_count",payload:{value:d}}]))}),[c,v,h,d,k]);var q=Object(r.useCallback)((function(e){t.current.push(e)}),[]),W=Object(r.useCallback)((function(e){t.current=t.current.filter((function(t){return!t.startsWith(e)})),E||w([{type:"unset_touched",payload:{path:e}},{type:"unset_visited",payload:{path:e}}])}),[E]),Z=Object(r.useCallback)((function(e,t){w({type:"set_errors",payload:{path:e,errors:t}})}),[]),G=Object(r.useCallback)((function(e,t){w({type:"unset_errors",payload:{path:e,errors:t}})}),[]),H=Object(r.useCallback)((function(){w({type:"inc_submit_count",payload:{value:1}})}),[]),L=function(e){var a;z||(e&&j(null==e?void 0:e.preventDefault)&&e.preventDefault(),e&&j(null==e?void 0:e.stopPropagation)&&e.stopPropagation(),!1!==l(V?x:(a=x,t.current.reduce((function(e,t){return Object(b.c)(e,t,Object(b.b)(a,t))}),{})),oe())&&H())},K=Object(r.useCallback)((function(e,t,a){if(void 0===a&&(a=!0),!z){var r=[{type:"set_value",payload:{path:e,value:t}}];a&&r.push({type:"set_touched",payload:{path:e,value:a}}),w(r)}}),[z]),Q=Object(r.useCallback)((function(e){z||w({type:"set_form_value",payload:{value:e(x)}})}),[x,z]),X=Object(r.useCallback)((function(e){z||w({type:"set_form_touched",payload:{value:e(I)}})}),[z,I]),ee=Object(r.useCallback)((function(e,t){z||w([{type:"set_visited",payload:{path:e,value:t}},{type:"set_active_field",payload:{path:null}}])}),[z]),te=Object(r.useCallback)((function(e){z||w({type:"set_form_visited",payload:{value:e(P)}})}),[P,z]),ae=Object(r.useCallback)((function(e){z||w({type:"set_active_field",payload:{path:e}})}),[z]),re=Object(r.useCallback)((function(){z||w([{type:"set_form_value",payload:{value:c}},{type:"set_form_touched",payload:{value:v}},{type:"set_form_visited",payload:{value:h}},{type:"set_submit_count",payload:{value:d}}])}),[d,v,c,h,z]),ne=Object(r.useCallback)((function(){z||w([{type:"set_form_touched",payload:{value:{}}},{type:"set_form_visited",payload:{value:{}}},{type:"set_submit_count",payload:{value:0}}])}),[z]);function oe(){var e=!D||0===M,t=D&&!y()(c,x);return{submit:L,errors:B,touched:I,visited:P,resetForm:re,formValue:x,errorCount:M,forgetState:ne,formIsDirty:t,activeField:U,submitCount:R,formIsValid:e,initialValue:c,initialMount:D,setFormValue:Q,setFormTouched:X,setFormVisited:te}}var ue=oe();return Object(p.a)(Object(p.a)({},ue),{submit:L,setValue:K,visitField:ee,touchField:function(e,t){z||w({type:"set_touched",payload:{path:e,value:t}})},registerField:q,registerErrors:Z,setActiveField:ae,unregisterErrors:G,unregisterField:W,value:x})}}function I(){var e=Object(r.createContext)(g),t=e.Provider,a=x(e).useField,o=P();function u(){return E(e).commonValues}function l(t){return _(t,e).branchValues}var i;return{useField:a,useForm:o,useCommonValues:u,useBranchValues:l,useYaflContext:function(){return E(e)},YaflProvider:function(e){var a=e.children,n=e.value,o=n.branchValues,u=void 0===o?{}:o,l=n.commonValues,i=void 0===l?{}:l;return Object(r.createElement)(t,{value:Object(p.a)(Object(p.a)({},n),{path:"",branchValues:u,commonValues:i})},a)},Form:V(o,t),Section:(i=e,function(e){var t=e.name,a=e.children,o=e.fallback,u=_(t,i,void 0===o?{}:o),l=u.registerField,c=u.unregisterField;Object(r.useEffect)((function(){return l(u.path),function(){return c(u.path)}}),[u.path,l,c]);var s=Object(r.useCallback)((function(e){u.setValue(u.path,j(e)?e(u.value):e,!1)}),[u.path,u.value,u.setValue]);return n.a.createElement(i.Provider,{value:u},"function"==typeof a?a(u.value,{setValue:s}):a)}),Repeat:N(e),Field:k(a,u,l),FormError:w(e)}}(D=I()).Field,D.Form;var M=D.useField,B=(D.Repeat,D.useForm),R=D.Section,U=D.FormError,z=D.YaflProvider,J=D.useYaflContext,Y=(D.useCommonValues,D.useBranchValues,a(2));function $(e){const{name:t,busy:a,label:r,type:o,placeholder:l,validate:i}=e,[c,s]=M(t,{validate:i}),{isValid:d,visited:m,submitCount:v,errors:f=[]}=s,p=!d&&(m||v>0);return n.a.createElement("div",{className:"input-group"},n.a.createElement("label",{htmlFor:c.name},r),a&&n.a.createElement("span",{className:"input-validating",role:"img","aria-label":"Validating"},"\ud83e\udd1e"),n.a.createElement("input",Object(Y.a)({},c,{type:o,placeholder:l,className:u()("text-input",{error:p})})),p&&n.a.createElement("div",{className:"input-feedback"},f[0]))}const q=e=>{if(null==e||""===e)return"This field is required"},W=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Z=e=>t=>{if(!W.test(t))return e||"Not a valid email address"};class G extends r.Component{constructor(e){super(e),this.state={showChangeEffect:!1}}componentDidMount(){this.timeout=null}shouldComponentUpdate(e,t){const{value:a}=this.props,{showChangeEffect:r}=this.state;return t.showChangeEffect!==r||!y()(a,e.value)}componentDidUpdate(e){const{value:t}=this.props;y()(t,e.value)||(this.setState(()=>({showChangeEffect:!0})),this.timeout=setTimeout(()=>{this.isUnmounting||this.setState(()=>({showChangeEffect:!1}))},500))}componentWillUnmount(){this.isUnmounting=!0,clearTimeout(this.timeout)}render(){const{value:e,spacing:t=2}=this.props,{showChangeEffect:a}=this.state;return n.a.createElement("pre",{className:u()("json-formatted",{"change-fade":!a})},JSON.stringify(e,null,t))}}const H={fullName:"",age:0,contact:{tel:"",email:"",random:{address:{streetNo:""}}}};var L=function(){const[e,t]=Object(r.useState)(!1),[a,o]=Object(r.useState)(H),u=B({initialValue:a,onSubmit:e=>{t(!0),setTimeout(()=>{o(e),t(!1)},1200)}});return n.a.createElement(z,{value:{...u,branchValues:{},commonValues:{}}},n.a.createElement("form",{onSubmit:u.submit},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col--4"},n.a.createElement("p",{className:"hero__subtitle"},"Form Value"),n.a.createElement(G,{value:u.formValue})),n.a.createElement("div",{className:"col col--4"},n.a.createElement("p",{className:"hero__subtitle"},"Demo Form"),n.a.createElement($,{name:"fullName",label:"Full Name",placeholder:"E.g. John Smith",validate:[q,(c=3,e=>{if(e.length<c)return`This field should be at least ${c} characters.`})]}),n.a.createElement($,{name:"age",type:"number",label:"Age",validate:[q,(l=5,i="Must be at least 5 years old!",e=>{if(e<l)return i||`Should be at least ${l}.`})],placeholder:"E.g. 29"}),n.a.createElement(R,{name:"contact"},n.a.createElement($,{name:"email",label:"Email",placeholder:"E.g. example@email.com",validate:[q,Z()]}),n.a.createElement(U,{path:"contact.email"}),n.a.createElement(R,{name:"random.address"},n.a.createElement($,{name:"postalCode",label:"Postal Code",placeholder:"Postal Code"}))),n.a.createElement(K,{submitting:e,fetching:!1})),n.a.createElement("div",{className:"col col--4"},n.a.createElement("p",{className:"hero__subtitle"},"Meta State"),n.a.createElement(G,{value:{activeField:u.activeField,submitCount:u.submitCount,errorCount:u.errorCount,formIsValid:u.formIsValid,formIsDirty:u.formIsDirty,touched:u.touched}})),n.a.createElement("div",{className:"col col--12"},n.a.createElement("p",{className:"hero__subtitle"},"Errors"),n.a.createElement(G,{value:{errorCount:u.errorCount,errors:u.errors}})))));var l,i,c};const K=({fetching:e,submitting:t})=>{const a=J();return n.a.createElement("button",{type:"submit",className:"button button--outline button--primary text--right",disabled:e||t},e?"Loading \u23f3":t?"Saving \u23f3":a.formIsDirty?"Save \ud83d\ude80":"Saved \ud83d\udc4d")};t.default=function(){var e=n.a.useState(!1),t=e[0],a=e[1],r=Object(d.a)().siteConfig,o=void 0===r?{}:r;return n.a.createElement(c.a,{title:"Hello from "+o.title,description:"Description will go into a meta tag in <head />"},n.a.createElement("header",{className:u()("hero hero--primary",f.a.heroBanner)},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"hero__title"},o.title),n.a.createElement("p",{className:"hero__subtitle"},o.tagline),n.a.createElement("div",{className:f.a.buttons},n.a.createElement(s.a,{className:u()("button button--lg margin-right--md",f.a.getStarted),to:Object(m.a)("docs/")},"Get Started"),n.a.createElement(l.CopyToClipboard,{onCopy:function(){a(!0),setTimeout((function(){a(!1)}),2e3)},text:"npm install yafl --save"},n.a.createElement("button",{"data-for":"npm-install","data-tip":"Copied!",type:"button",className:u()("button button--secondary button--lg",f.a.getStarted)},n.a.createElement("code",null,"npm install yafl --save"))),n.a.createElement(i.a,{id:"npm-install",getContent:function(){return t?"Nice! \u2705":"Copy \ud83d\udccb"}})))),n.a.createElement("div",{className:"container margin-top--md"},n.a.createElement(L,null)))}}}]);