(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{174:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(179),u=a.n(o),l=a(240),i=a(258),c=a(182),s=a(181),d=a(180),m=a(183),v=a(165),f=a.n(v),p=(a(187),a(203),a(204),a(244),a(94),a(246),a(249),a(251),a(254),a(186),a(24),a(19),a(20),a(52),a(255),a(210),a(257)),b=a(259),h=a(194),y=a.n(h);function j(e){return"function"==typeof e}function O(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}var g=Symbol("uniq");function E(e){var t=Object(r.useContext)(e);if(t===g)throw new Error("A Yafl context consumer can only appear inside a Provider component of the same context (<Form /> or <YaflProvider />). Have you forgotten to wrap one or more of your consumer components in one of these Provider components?");return t}var C=function(e,t){return e?e.concat("."+t):""+t};function _(e,t,a){var r=E(t),n=r.path,o=r.value,u=r.errors,l=void 0===u?{}:u,i=r.visited,c=void 0===i?{}:i,s=r.touched,d=void 0===s?{}:s,m=r.branchValues,v=void 0===m?{}:m,f=r.initialValue;return Object(p.a)(Object(p.a)({},r),{path:C(n,e),touched:d[e],visited:c[e],errors:l[e],initialValue:null==f?void 0:f[e],value:void 0===(null==o?void 0:o[e])?a:null==o?void 0:o[e],branchValues:Object.keys(v||{}).reduce((function(t,a){return t[a]=function(e){return null!==e&&e instanceof Object}(v[a])?v[a][e]:void 0,t}),{})})}function V(e,t){return function(a){var r=a.children,o=a.commonValues,u=void 0===o?{}:o,l=a.branchValues,i=void 0===l?{}:l,c=e(a);return n.a.createElement(t,{value:Object(p.a)(Object(p.a)({},c),{path:"",branchValues:j(i)?i({formValue:c.formValue}):i,commonValues:j(u)?u({formValue:c.formValue}):u})},"function"==typeof r?r(c):r)}}function F(e){e.path;return null}function k(e,t,a){return function(r){var o,u=r.name,l=r.render,i=r.validate,c=r.component,s=Object(p.b)(r,["name","render","validate","component"]),d=e(u,{validate:i}),m=d[0],v=d[1],f=a(u),b=t(u),h=Object(p.a)(Object(p.a)({},m),{value:(o=s.type,"radio"===o||"checkbox"===o?s.value:m.value)}),y=Object(p.a)(Object(p.a)(Object(p.a)({input:h,meta:v},s),f),b);if(c&&"string"!=typeof c){var j=c;return n.a.createElement(j,Object(p.a)({key:"comp"},y))}return l?l(y):"string"==typeof c?n.a.createElement(c,Object(p.a)(Object(p.a)({},h),s)):n.a.createElement(F,Object(p.a)({key:"comp",path:v.path},y))}}function N(e){return function(t){var a=t.name,o=t.children,u=t.fallback,l=_(a,e,void 0===u?[]:u);Object(r.useEffect)((function(){return l.registerField(l.path),function(){return l.unregisterField(l.path)}}),[l.registerField,l.unregisterField,l.path]);var i=Object(r.useCallback)((function(e){l.setValue(l.path,"function"==typeof e?e(l.value):e,!1)}),[l.value,l.setValue,l.path]),c=Object(r.useCallback)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=Object(p.c)(l.value),r=a.push.apply(a,e);return i(a),r}),[l.value,i]),s=Object(r.useCallback)((function(){var e=Object(p.c)(l.value),t=e.pop();return i(e),t}),[l.value,i]),d=Object(r.useCallback)((function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];var r=Object(p.c)(l.value);return r.splice.apply(r,Object(p.c)([e,0],t)),i(r),r.length}),[l.value,i]),m=Object(r.useCallback)((function(e){var t=Object(p.c)(l.value),a=t.splice(e,1);return i(t),a[0]}),[l.value,i]),v=Object(r.useCallback)((function(){var e=Object(p.c)(l.value),t=e[0];return i(e.splice(1)),t}),[l.value,i]),f=Object(r.useCallback)((function(e,t){var a=Object(p.c)(l.value);a[e]=[a[t],a[t]=a[e]][0],i(a)}),[l.value,i]),b=Object(r.useCallback)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=Object(p.c)(l.value),r=a.unshift.apply(a,e);return i(a),r}),[l.value,i]);return n.a.createElement(e.Provider,{value:l},"function"==typeof o?o(l.value,{pop:s,push:c,swap:f,shift:v,insert:d,remove:m,unshift:b,setValue:i}):o)}}var S=function(e){var t=e.msg,a=e.path,n=e.registerErrors,o=e.unregisterErrors;return Object(r.useEffect)((function(){return n(a,[t]),function(){return o(a,[t])}}),[t,a,n,o]),null};function w(e){return function(t){var a=E(e),r=t.path,o=void 0===r?"":r,u=t.msg,l=t.children,i=void 0===l?null:l;return"string"==typeof u?n.a.createElement(S,Object(p.a)({key:u+o},a,{msg:u,path:o})):i}}function x(e){function t(e,t,a){void 0===a&&(a={});var n=a.validate,o=e,u=t.setValue,l=t.registerField,i=t.unregisterField,c=t.registerErrors,s=t.unregisterErrors,d=t.setActiveField;Object(r.useEffect)((function(){return l(o),function(){return i(o)}}),[o,l,i]);var m,v=(m=n,null==m?[]:Array.isArray(m)?m:[m]).map((function(e){return e(t.value,t.formValue)})).filter(Boolean);Object(r.useEffect)((function(){return c(o,v),function(){return s(o,v)}}),[o,v.join(""),s,c]);var f=Object(r.useCallback)((function(e,a){void 0===a&&(a=!0),u(o,j(e)?e(t.value):e,a)}),[t.value,u,o]),p=t.touchField,b=Object(r.useCallback)((function(e){p(o,e)}),[p,o]),h=t.visitField,y=Object(r.useCallback)((function(e){h(o,e)}),[h,o]),O=Object(r.useCallback)((function(e){var t=e.target,a=t.value,r=t.type,n=t.checked,o=a;if(/number|range/.test(r)){var u=parseFloat(o);o=Number.isNaN(u)?"":u}else(function(e){return"radio"===e||"checkbox"===e})(r)&&(o=n);f(o)}),[f]),g=Object(r.useCallback)((function(){d(o)}),[d,o]),E=Object(r.useCallback)((function(){t.visited?d(null):h(o,!0)}),[d,h,o,t.visited]),C={path:o,setValue:f,submit:t.submit,errors:t.errors||[],visited:!!t.visited,touched:!!t.touched,setTouched:b,setVisited:y,formValue:t.formValue,resetForm:t.resetForm,setFormValue:t.setFormValue,submitCount:t.submitCount,forgetState:t.forgetState,initialValue:t.initialValue,setFormVisited:t.setFormVisited,setFormTouched:t.setFormTouched,isActive:t.activeField===o,isValid:0===(t.errors||[]).length,isDirty:t.formIsDirty&&t.initialValue!==t.value};return[{onBlur:E,onFocus:g,onChange:O,name:e.toString(),value:t.value},C]}return{useField:function(a,r){void 0===r&&(r={});var n=_(a,e);return t(n.path,n,r)},useFieldBase:t}}function A(e,t){return(Array.isArray(t)?t:[t]).reduce((function(e,t){switch(t.type){case"set_form_value":var a=t.payload.value;e.formValue=a;break;case"set_active_field":var r=t.payload.path;e.activeField=r;break;case"unset_touched":r=t.payload.path;e.touched=Object(b.a)(e.touched,r);break;case"set_touched":var n=t.payload;r=n.path,a=n.value;e.touched=Object(b.c)(e.touched,r,a);break;case"set_visited":var o=t.payload;r=o.path,a=o.value;e.visited=Object(b.c)(e.visited,r,a);break;case"set_form_touched":a=t.payload.value;e.touched=a;break;case"set_form_visited":a=t.payload.value;e.visited=a;break;case"set_value":var u=t.payload,l=(r=u.path,a=u.value,e.formValue);e.formValue=Object(b.c)(l,r,a);break;case"unset_visited":r=t.payload.path;e.visited=Object(b.a)(e.visited,r);break;case"set_errors":var i=t.payload,c=(r=i.path,i.errors),s=(m=Object(b.b)(e.errors,r,[])).length,d=new Set(m.concat(c));e.errorCount=e.errorCount-s+d.size,e.errors=Object(b.c)(e.errors,r,Array.from(d));break;case"unset_errors":var m,v=t.payload,f=(r=v.path,v.errors),p=(m=Object(b.b)(e.errors,r,[])).filter((function(e){return!f.includes(e)}));e.errorCount-=f.length,e.errors=Object(b.c)(e.errors,r,p);break;case"set_submit_count":a=t.payload.value;e.submitCount=a;break;default:throw new Error("unknown action")}return e}),Object(p.a)({},e))}var D,P=function(){};function T(){return function(e){var t=n.a.useRef([]),a=e,o=a.disabled,u=a.onSubmit,l=void 0===u?P:u,i=a.initialValue,c=a.initialSubmitCount,s=void 0===c?0:c,d=a.initialTouched,m=void 0===d?{}:d,v=a.initialVisited,f=void 0===v?{}:v,h=a.onStateChange,g=void 0===h?P:h,E=a.persistFieldState,C=a.onFormValueChange,_=a.submitUnregisteredValues,V=void 0!==_&&_,F=a.rememberStateOnReinitialize,k=void 0!==F&&F,N=n.a.useReducer(A,{errors:{},errorCount:0,activeField:null,touched:m,visited:f,submitCount:s,formValue:i||{}}),S=N[0],w=N[1],x=S.formValue,D=S.visited,T=S.touched,I=S.errorCount,B=S.errors,R=S.submitCount,U=S.activeField,Y=o?P:w,z=O(S),J=O(i);Object(r.useEffect)((function(){z&&g(z,S)}),[g,S,z]);var M=null==z?void 0:z.formValue;Object(r.useEffect)((function(){M&&("function"!=typeof C||y()(M,x)||C(M,x))}),[C,x,M]),Object(r.useEffect)((function(){y()(J,i)||(w({type:"set_form_value",payload:{value:i||{}}}),k||w([{type:"set_form_touched",payload:{value:m}},{type:"set_form_visited",payload:{value:f}},{type:"set_submit_count",payload:{value:s}}]))}),[i,m,f,J,s,k]);var q=Object(r.useCallback)((function(e){t.current.push(e)}),[]),H=Object(r.useCallback)((function(e){t.current=t.current.filter((function(t){return!t.startsWith(e)})),E||w([{type:"unset_touched",payload:{path:e}},{type:"unset_visited",payload:{path:e}}])}),[E]),W=Object(r.useCallback)((function(e,t){w({type:"set_errors",payload:{path:e,errors:t}})}),[]),Z=Object(r.useCallback)((function(e,t){w({type:"unset_errors",payload:{path:e,errors:t}})}),[]),G=function(e){var a;o||(e&&j(null==e?void 0:e.preventDefault)&&e.preventDefault(),e&&j(null==e?void 0:e.stopPropagation)&&e.stopPropagation(),!1!==l(V?x:(a=x,t.current.reduce((function(e,t){return Object(b.c)(e,t,Object(b.b)(a,t))}),{})),re())&&w({type:"set_submit_count",payload:{value:R+1}}))},L=Object(r.useCallback)((function(e,t,a){void 0===a&&(a=!0);var r=[{type:"set_value",payload:{path:e,value:t}}];a&&r.push({type:"set_touched",payload:{path:e,value:a}}),Y(r)}),[Y]),$=Object(r.useCallback)((function(e){Y({type:"set_form_value",payload:{value:e(x)}})}),[Y,x]),K=Object(r.useCallback)((function(e){Y({type:"set_form_touched",payload:{value:e(T)}})}),[Y,T]),Q=Object(r.useCallback)((function(e,t){Y([{type:"set_visited",payload:{path:e,value:t}},{type:"set_active_field",payload:{path:null}}])}),[Y]),X=Object(r.useCallback)((function(e){Y({type:"set_form_visited",payload:{value:e(D)}})}),[Y,D]),ee=Object(r.useCallback)((function(e){Y({type:"set_active_field",payload:{path:e}})}),[Y]),te=Object(r.useCallback)((function(){Y([{type:"set_form_value",payload:{value:i}},{type:"set_form_touched",payload:{value:m}},{type:"set_form_visited",payload:{value:f}},{type:"set_submit_count",payload:{value:s}}])}),[Y,s,m,i,f]),ae=Object(r.useCallback)((function(){Y([{type:"set_form_touched",payload:{value:{}}},{type:"set_form_visited",payload:{value:{}}},{type:"set_submit_count",payload:{value:0}}])}),[Y]);function re(){var e=0===I,t=!y()(i,x);return{submit:G,errors:B,touched:T,visited:D,resetForm:te,formValue:x,errorCount:I,forgetState:ae,formIsDirty:t,activeField:U,submitCount:R,formIsValid:e,initialValue:i,setFormValue:$,setFormTouched:K,setFormVisited:X}}var ne=re();return Object(p.a)(Object(p.a)({},ne),{submit:G,setValue:L,visitField:Q,touchField:function(e,t){Y({type:"set_touched",payload:{path:e,value:t}})},registerField:q,registerErrors:W,setActiveField:ee,unregisterErrors:Z,unregisterField:H,value:x})}}function I(){var e=Object(r.createContext)(g),t=e.Provider,a=x(e).useField,o=T();function u(){return E(e).commonValues}function l(t){return _(t,e).branchValues}var i;return{useField:a,useForm:o,useCommonValues:u,useBranchValues:l,useYaflContext:function(){return E(e)},YaflProvider:function(e){var a=e.children,n=e.value,o=e.branchValues,u=void 0===o?{}:o,l=e.commonValues,i=void 0===l?{}:l;return Object(r.createElement)(t,{value:Object(p.a)(Object(p.a)({},n),{path:"",branchValues:u,commonValues:i})},a)},Form:V(o,t),Section:(i=e,function(e){var t=e.name,a=e.children,o=e.fallback,u=_(t,i,void 0===o?{}:o),l=u.registerField,c=u.unregisterField;Object(r.useEffect)((function(){return l(u.path),function(){return c(u.path)}}),[u.path,l,c]);var s=Object(r.useCallback)((function(e){u.setValue(u.path,j(e)?e(u.value):e,!1)}),[u.path,u.value,u.setValue]);return n.a.createElement(i.Provider,{value:u},"function"==typeof a?a(u.value,{setValue:s}):a)}),Repeat:N(e),Field:k(a,u,l),FormError:w(e)}}(D=I()).Field,D.Form;var B=D.useField,R=(D.Repeat,D.useForm),U=D.Section,Y=D.FormError,z=D.YaflProvider,J=D.useYaflContext,M=(D.useCommonValues,D.useBranchValues,a(2));function q(e){var t=e.name,a=e.busy,r=e.label,o=e.type,l=e.placeholder,i=e.validate,c=B(t,{validate:i}),s=c[0],d=c[1],m=d.isValid,v=d.visited,f=d.submitCount,p=d.errors,b=void 0===p?[]:p,h=!m&&(v||f>0);return n.a.createElement("div",{className:"input-group"},n.a.createElement("label",{htmlFor:s.name},r),a&&n.a.createElement("span",{className:"input-validating",role:"img","aria-label":"Validating"},"\ud83e\udd1e"),n.a.createElement("input",Object(M.a)({},s,{type:o,placeholder:l,className:u()("text-input",{error:h})})),h&&n.a.createElement("div",{className:"input-feedback"},b[0]))}var H=function(e){if(null==e||""===e)return"This field is required"},W=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Z=function(e){return function(t){if(!W.test(t))return e||"Not a valid email address"}},G=a(4),L=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={showChangeEffect:!1},a}Object(G.a)(t,e);var a=t.prototype;return a.componentDidMount=function(){this.timeout=null},a.shouldComponentUpdate=function(e,t){var a=this.props.value,r=this.state.showChangeEffect;return t.showChangeEffect!==r||!y()(a,e.value)},a.componentDidUpdate=function(e){var t=this,a=this.props.value;y()(a,e.value)||(this.setState((function(){return{showChangeEffect:!0}})),this.timeout=setTimeout((function(){t.isUnmounting||t.setState((function(){return{showChangeEffect:!1}}))}),500))},a.componentWillUnmount=function(){this.isUnmounting=!0,clearTimeout(this.timeout)},a.render=function(){var e=this.props,t=e.value,a=e.spacing,r=void 0===a?2:a,o=this.state.showChangeEffect;return n.a.createElement("pre",{className:u()("json-formatted",{"change-fade":!o})},JSON.stringify(t,null,r))},t}(r.Component),$={fullName:"",age:0,contact:{tel:"",email:"",random:{address:{streetNo:""}}}};var K=function(){var e,t,a,o=Object(r.useState)(!1),u=o[0],l=o[1],i=Object(r.useState)($),c=i[0],s=i[1],d=R({initialValue:c,onSubmit:function(e){l(!0),setTimeout((function(){s(e),l(!1)}),1200)}});return n.a.createElement(z,{value:d},n.a.createElement("form",{onSubmit:d.submit},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col--4"},n.a.createElement("p",{className:"hero__subtitle"},"Form Value"),n.a.createElement(L,{value:d.formValue})),n.a.createElement("div",{className:"col col--4"},n.a.createElement("p",{className:"hero__subtitle"},"Demo Form"),n.a.createElement(q,{name:"fullName",label:"Full Name",placeholder:"E.g. John Smith",validate:[H,(a=3,function(e){if(e&&e.length<a)return"This field should be at least "+a+" characters."})]}),n.a.createElement(q,{name:"age",type:"number",label:"Age",validate:[H,(e=5,t="Must be at least 5 years old!",function(a){if(a<e)return t||"Should be at least "+e+"."})],placeholder:"E.g. 29"}),n.a.createElement(U,{name:"contact"},n.a.createElement(q,{name:"email",label:"Email",placeholder:"E.g. example@email.com",validate:[H,Z()]}),n.a.createElement(Y,{path:"contact.email"}),n.a.createElement(U,{name:"random.address"},n.a.createElement(q,{name:"postalCode",label:"Postal Code",placeholder:"Postal Code"}))),n.a.createElement(Q,{submitting:u,fetching:!1})),n.a.createElement("div",{className:"col col--4"},n.a.createElement("p",{className:"hero__subtitle"},"Meta State"),n.a.createElement(L,{value:{activeField:d.activeField,submitCount:d.submitCount,errorCount:d.errorCount,formIsValid:d.formIsValid,formIsDirty:d.formIsDirty,touched:d.touched}})),n.a.createElement("div",{className:"col col--12"},n.a.createElement("p",{className:"hero__subtitle"},"Errors"),n.a.createElement(L,{value:{errorCount:d.errorCount,errors:d.errors}})))))},Q=function(e){var t=e.fetching,a=e.submitting,r=J();return n.a.createElement("button",{type:"submit",className:"button button--outline button--primary text--right",disabled:t||a},t?"Loading \u23f3":a?"Saving \u23f3":r.formIsDirty?"Save \ud83d\ude80":"Saved \ud83d\udc4d")};t.default=function(){var e=n.a.useState(!1),t=e[0],a=e[1],r=Object(d.a)().siteConfig,o=void 0===r?{}:r;return n.a.createElement(c.a,{title:"Hello from "+o.title,description:"Description will go into a meta tag in <head />"},n.a.createElement("header",{className:u()("hero hero--primary",f.a.heroBanner)},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"hero__title"},o.title),n.a.createElement("p",{className:"hero__subtitle"},o.tagline),n.a.createElement("div",{className:f.a.buttons},n.a.createElement(s.a,{className:u()("button button--lg margin-right--md",f.a.getStarted),to:Object(m.a)("docs/")},"Get Started"),n.a.createElement(l.CopyToClipboard,{onCopy:function(){a(!0),setTimeout((function(){a(!1)}),2e3)},text:"npm install yafl --save"},n.a.createElement("button",{"data-for":"npm-install","data-tip":"Copied!",type:"button",className:u()("button button--secondary button--lg",f.a.getStarted)},n.a.createElement("code",null,"npm install yafl --save"))),n.a.createElement(i.a,{id:"npm-install",getContent:function(){return t?"Nice! \u2705":"Copy \ud83d\udccb"}})))),n.a.createElement("div",{className:"container margin-top--md"},n.a.createElement(K,null)))}}}]);