/*! For license information please see 26fb9423.04c011aa.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{114:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return u})),n.d(t,"default",(function(){return b}));var a=n(2),o=n(6),r=(n(0),n(146)),i=n(156),s=n(154),c={id:"arrays-and-objects",title:"Arrays and nested objects",sidebar_label:"Arrays and nested objects"},l={id:"arrays-and-objects",title:"Arrays and nested objects",description:"Working with complex data structures in Yafl is made easy by using the ` and  components which are used to create nested object and array structures, respectively. The  component is similar to what is often called a  in other form libraries but with one key difference which we'll see in a bit. There is no analogous component for `, however!",source:"@site/docs/arrays-and-objects.md",permalink:"/yafl/docs/arrays-and-objects",sidebar_label:"Arrays and nested objects",sidebar:"main",previous:{title:"Validating user input",permalink:"/yafl/docs/validation"},next:{title:"Using createFormContext()",permalink:"/yafl/docs/createFormContext"}},u=[{value:"A note on <code>&quot;string.paths&quot;</code>",id:"a-note-on-stringpaths",children:[]},{value:"The <code>&lt;Repeat /&gt;</code> component",id:"the-repeat--component",children:[{value:"Example",id:"example",children:[]}]},{value:"The <code>&lt;Section /&gt;</code> component",id:"the-section--component",children:[{value:"Example",id:"example-1",children:[]}]}],p={rightToc:u};function b(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Working with complex data structures in Yafl is made easy by using the ",Object(r.b)("inlineCode",{parentName:"p"},"<Section />")," and ",Object(r.b)("inlineCode",{parentName:"p"},"<Repeat />")," components which are used to create nested object and array structures, respectively. The ",Object(r.b)("inlineCode",{parentName:"p"},"<Repeat />")," component is similar to what is often called a ",Object(r.b)("inlineCode",{parentName:"p"},"<FieldArray />")," in other form libraries but with one key difference which we'll see in a bit. There is no analogous component for ",Object(r.b)("inlineCode",{parentName:"p"},"<Section />"),", however!"),Object(r.b)("h2",{id:"a-note-on-stringpaths"},"A note on ",Object(r.b)("inlineCode",{parentName:"h2"},'"string.paths"')),Object(r.b)("p",null,"At this point it would be good to point out something that Yafl does differently - it does not require you to you use string paths to create complex objects and arrays in your form. You've probably seen the following syntax before: "),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"<Field name={`profile.contact.addresses[${i}].code`} />\n")),Object(r.b)("p",null,'This syntax is being used to create depth in a from. But this is error prone, difficult to refactor and a hard to read. Imagine if you have to change the "shape" of your form so that the ',Object(r.b)("inlineCode",{parentName:"p"},"addresses")," array is no longer on the ",Object(r.b)("inlineCode",{parentName:"p"},"contact"),' object, but rather it is "moved up" to be a property of the ',Object(r.b)("inlineCode",{parentName:"p"},"profile")," object. We would have to modify all the field names by removing ",Object(r.b)("inlineCode",{parentName:"p"},'".contact"'),". That's okay, but we can do better! Yafl leverages React context build up these string paths for you. That said, you do not have to use these components at all, Yafl still supports using string paths if you prefer to use them or a combination of both. "),Object(r.b)("p",null,"Let's start by explaining the ",Object(r.b)("inlineCode",{parentName:"p"},"<Repeat />")," component as it is likely to be the most familiar to many of you. "),Object(r.b)("h2",{id:"the-repeat--component"},"The ",Object(r.b)("inlineCode",{parentName:"h2"},"<Repeat />")," component"),Object(r.b)("p",null,"Use the Repeat component when you require arrays or lists in your forms. "),Object(r.b)("h3",{id:"example"},"Example"),Object(r.b)(i.a,{defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"Tabs"},Object(r.b)(s.a,{value:"js",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:'title="/src/HobbyForm.js"',title:'"/src/HobbyForm.js"'}),"import React from 'react'\nimport { Form, Repeat } from 'yafl'\nimport TextInput from './TextInput'\n\nconst initialValue = {\n  hobbies: []\n}\n\nfunction SignupForm(props) {\n  function handleSubmit(value) {\n    console.log(value)\n  }\n\n  return (\n    <Form\n      initialValue={initialValue} \n      onSubmit={handleSubmit}\n    >\n      {(yafl) => (\n        <form onSubmit={yafl.submit}>\n          <Repeat name=\"hobbies\">\n            {(hobbies, { push }) => (\n              <>\n                {hobbies.map((hobby, i) => <TextInput key={i} name={i} />)}\n                <button \n                  type=\"button\" \n                  onClick={() => push('')}\n                >\n                  Add hobby\n                </button>\n              </>\n            )}\n          </Repeat>\n          <button type=\"submit\">Submit!<button>\n        </form>\n      )}\n    </Form>\n  )\n}\n"))),Object(r.b)(s.a,{value:"ts",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts",metastring:'title="/src/HobbyForm.tsx"',title:'"/src/HobbyForm.tsx"'}),"import React from 'react'\nimport { Form, Repeat } from 'yafl'\nimport TextInput from './TextInput'\n\ninterface FormValue {\n  hobbies: string[]\n}\n\nconst initialValue: FormValue = {\n  hobbies: []\n}\n\nfunction SignupForm(props: {}) {\n  function handleSubmit(value: FormValue) {\n    console.log(value)\n  }\n\n  return (\n    <Form<FormValue> \n      initialValue={initialValue} \n      onSubmit={handleSubmit}\n    >\n      {(yafl) => (\n        <form onSubmit={yafl.submit}>\n          <Repeat<string> name=\"hobbies\">\n            {(hobbies, { push }) => (\n              <>\n                {hobbies.map((hobby, i) => <TextInput<string> key={i} name={i} />)}\n                <button \n                  type=\"button\" \n                  onClick={() => push('')}\n                >\n                  Add hobby\n                </button>\n              </>\n            )}\n          </Repeat>\n          <button type=\"submit\">Submit!<button>\n        </form>\n      )}\n    </Form>\n  )\n}\n")))),Object(r.b)("p",null,"Nothing new here. We have a simple hobby form where users can continuously push hobbies (as simple string values) onto an array. If you've used FieldArrays before then this is exactly what you're used to! Notice the destructuring of ",Object(r.b)("inlineCode",{parentName:"p"},"push")," in the render prop. This utility object also contains other important array helper methods such as ",Object(r.b)("inlineCode",{parentName:"p"},"pop"),", ",Object(r.b)("inlineCode",{parentName:"p"},"shift"),", ",Object(r.b)("inlineCode",{parentName:"p"},"insert"),", ",Object(r.b)("inlineCode",{parentName:"p"},"swap")," and ",Object(r.b)("inlineCode",{parentName:"p"},"remove"),". Read more about these helper functions in the documentation for ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"./repeat"}),Object(r.b)("inlineCode",{parentName:"a"},"<Repeat />"))),Object(r.b)("p",null,"Next let's take a look the ",Object(r.b)("inlineCode",{parentName:"p"},"<Section />")," component!"),Object(r.b)("h2",{id:"the-section--component"},"The ",Object(r.b)("inlineCode",{parentName:"h2"},"<Section />")," component"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"<Section />")," component is similar to a ",Object(r.b)("inlineCode",{parentName:"p"},"<Repeat />")," but is used to represent objects - not arrays. Sections and Repeats can be used together to create very complex object structures."),Object(r.b)("h3",{id:"example-1"},"Example"),Object(r.b)(i.a,{defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"Tabs"},Object(r.b)(s.a,{value:"js",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:'title="/src/AddressForm.js"',title:'"/src/AddressForm.js"'}),"import React from 'react'\nimport { Form, Repeat, Section } from 'yafl'\nimport TextInput from './TextInput'\n\nconst initialValue = {\n  contact: {\n    // initialize with one empty address\n    addresses: [{\n      line1: '',\n      country: '',\n      postalCode: ''\n    }]\n  }\n}\n\nfunction SignupForm(props) {\n  function handleSubmit(value) {\n    console.log(value)\n  }\n\n  return (\n    <Form\n      initialValue={initialValue} \n      onSubmit={handleSubmit}\n    >\n      <Section name=\"contact\">\n        <Repeat name=\"addresses\">\n          {(addresses) => {\n            return addresses.map((address, i) => (\n              <Section key={i} name={i}>\n                <TextInput name=\"line1\" />\n                <TextInput name=\"country\" />\n                <TextInput name=\"postalCode\" />\n              <Section>\n            ))\n          }}\n        </Repeat>\n      </Section>\n    </Form>\n  )\n}\n"))),Object(r.b)(s.a,{value:"ts",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts",metastring:'title="/src/AddressForm.tsx"',title:'"/src/AddressForm.tsx"'}),"import React from 'react'\nimport { Form, Repeat, Section } from 'yafl'\nimport TextInput from './TextInput'\n\ninterface Address {\n  line1: string;\n  country: string;\n  postalCode: string;\n}\n\ninterface Contact {\n  addresses: Address[];\n}\n\ninterface FormValue {\n  contact: Contact;\n}\n\nconst initialValue: FormValue = {\n  contact: {\n    // initialize with one empty address\n    addresses: [{\n      line1: '',\n      country: '',\n      postalCode: ''\n    }]\n  }\n}\n\nfunction SignupForm(props: {}) {\n  function handleSubmit(value: FormValue) {\n    console.log(value)\n  }\n\n  return (\n    <Form<FormValue>\n      initialValue={initialValue} \n      onSubmit={handleSubmit}\n    >\n      <Section<Contact> name=\"contact\">\n        <Repeat<Address> name=\"addresses\">\n          {(addresses) => {\n            return addresses.map((address, i) => (\n              <Section key={i} name={i}>\n                <TextInput name=\"line1\" />\n                <TextInput name=\"country\" />\n                <TextInput name=\"postalCode\" />\n              <Section>\n            ))\n          }}\n        </Repeat>\n      </Section>\n    </Form>\n  )\n}\n")))))}b.isMDXComponent=!0},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),u=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=u(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},m=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=u(n),m=a,d=p["".concat(i,".").concat(m)]||p[m]||b[m]||r;return n?o.a.createElement(d,s(s({ref:t},l),{},{components:n})):o.a.createElement(d,s({ref:t},l))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<r;l++)i[l]=n[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},147:function(e,t,n){var a;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var r=typeof a;if("string"===r||"number"===r)e.push(a);else if(Array.isArray(a)&&a.length){var i=o.apply(null,a);i&&e.push(i)}else if("object"===r)for(var s in a)n.call(a,s)&&a[s]&&e.push(s)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(a=function(){return o}.apply(t,[]))||(e.exports=a)}()},152:function(e,t,n){"use strict";var a=n(0);const o=Object(a.createContext)({tabGroupChoices:{},setTabGroupChoices:()=>{}});t.a=o},154:function(e,t,n){"use strict";var a=n(0),o=n.n(a);t.a=function(e){return o.a.createElement("div",null,e.children)}},156:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(152);var i=function(){return Object(a.useContext)(r.a)},s=n(147),c=n.n(s),l=n(92),u=n.n(l);const p=37,b=39;t.a=function(e){const{block:t,children:n,defaultValue:r,values:s,groupId:l}=e,{tabGroupChoices:m,setTabGroupChoices:d}=i(),[f,h]=Object(a.useState)(r);if(null!=l){const e=m[l];null!=e&&e!==f&&h(e)}const y=e=>{h(e),null!=l&&d(l,e)},j=[];return o.a.createElement("div",null,o.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:c()("tabs",{"tabs--block":t})},s.map(({value:e,label:t})=>o.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":f===e,className:c()("tabs__item",u.a.tabItem,{"tabs__item--active":f===e}),key:e,ref:e=>j.push(e),onKeyDown:e=>((e,t,n)=>{switch(n.keyCode){case b:((e,t)=>{const n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()})(e,t);break;case p:((e,t)=>{const n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()})(e,t)}})(j,e.target,e),onFocus:()=>y(e),onClick:()=>y(e)},t))),o.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},a.Children.toArray(n).filter(e=>e.props.value===f)[0]))}}}]);